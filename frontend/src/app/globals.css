/* ============================================
   Custom Fonts
   ============================================ */

/* Display — titler og overskrifter */
@font-face {
  font-family: "ABC Diatype Plus";
  src: url("/fonts/ABCDiatypePlusVariable_fixed-s.woff2") format("woff2");
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

/* Brand — logo, hero text */
@font-face {
  font-family: "Ivar Text";
  src: url("/fonts/IvarText_Regular.woff2") format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* TheFold Brand — custom logotype font */
@font-face {
  font-family: "TheFold Brand";
  src: url("/fonts/thefold.woff2") format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* Inter — generell UI */
@font-face {
  font-family: "Inter";
  src: url("/fonts/Inter_18pt-Regular.woff2") format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Inter";
  src: url("/fonts/Inter_18pt-Medium.woff2") format("woff2");
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   TheFold Design System
   ============================================ */

:root {
  /* Badges */
  --badge-active-bg: #d5e8a0;
  --badge-active-text: #3d5a00;
  --badge-inactive-bg: #e8e8e4;
  --badge-inactive-text: #6b6b6b;

  /* Status */
  --success: #22c55e;
  --warning: #eab308;
  --error: #ef4444;
  --info: #3b82f6;

  /* Code block left-border colors */
  --code-border-orange: #f59e0b;
  --code-border-blue: #3b82f6;
  --code-border-green: #22c55e;
  --code-border-purple: #8b5cf6;
}

/* Dark theme (default) */
[data-theme="dark"] {
  --bg-page: #070706;
  --bg-card: transparent;
  --bg-card-secondary: transparent;
  --bg-input: #0e0e0d;
  --bg-code: #0a0a09;
  --bg-hover: #1e1e1c;

  --bg-chat: #1e1e1c;
  --text-chat: #787877;

  --text-primary: #fafaf9;
  --text-secondary: #7b7a76;
  --text-muted: #52524e;

  --border: #2a2a28;
  --border-hover: #3f3f3b;

  --bg-sidebar: #070706;
  --bg-sidebar-section: transparent;
  --bg-sidebar-hover: #1e1e1c;
  --bg-sidebar-active: #1e1e1c;
  --sidebar-text: #7b7a76;
  --sidebar-text-active: #fafaf9;
  --sidebar-border: #2a2a28;
}

/* Light theme */
[data-theme="light"] {
  --bg-page: #faf9f6;
  --bg-card: transparent;
  --bg-card-secondary: transparent;
  --bg-input: #f4f3f0;
  --bg-code: #f0efec;
  --bg-hover: #ededea;

  --bg-chat: #f0efec;
  --text-chat: #6b6b68;

  --text-primary: #1a1a18;
  --text-secondary: #7b7a76;
  --text-muted: #9a9a96;

  --border: #e0dfdb;
  --border-hover: #d4d3cf;

  --bg-sidebar: #070706;
  --bg-sidebar-section: transparent;
  --bg-sidebar-hover: #1e1e1c;
  --bg-sidebar-active: #1e1e1c;
  --sidebar-text: #7b7a76;
  --sidebar-text-active: #fafaf9;
  --sidebar-border: #2a2a28;
}

/* ============================================
   Base
   ============================================ */

@layer base {
  body {
    background-color: var(--bg-page);
    color: var(--text-primary);
    font-family: "Inter", system-ui, sans-serif;
    font-size: 14px;
    font-weight: 400;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
  }

  ::selection {
    background: rgba(255, 255, 255, 0.15);
  }

  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--border-hover);
  }
}

/* ============================================
   Components
   ============================================ */

@layer components {
  /* --- Buttons (flat, square, solid) --- */

  .btn-primary {
    background: var(--text-primary);
    color: var(--bg-page);
    font-family: "Inter", system-ui, sans-serif;
    font-weight: 500;
    padding: 8px 20px;
    border-radius: 0;
    border: 1px solid var(--text-primary);
    font-size: 14px;
    transition: all 150ms ease;
    display: inline-flex;
    align-items: center;
    gap: 8px;
  }
  .btn-primary:hover:not(:disabled) {
    opacity: 0.85;
  }
  .btn-primary:active:not(:disabled),
  .btn-primary:focus:not(:disabled) {
    opacity: 0.75;
    outline: none;
  }
  .btn-primary:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }

  .btn-secondary {
    background: transparent;
    color: var(--text-secondary);
    font-family: "Inter", system-ui, sans-serif;
    font-weight: 400;
    padding: 6px 16px;
    border-radius: 0;
    border: 1px solid var(--border);
    font-size: 13px;
    transition: all 150ms ease;
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }
  .btn-secondary:hover:not(:disabled) {
    color: var(--text-primary);
    background: var(--bg-hover);
  }

  .btn-outline {
    background: transparent;
    color: var(--text-secondary);
    font-family: "Inter", system-ui, sans-serif;
    font-weight: 400;
    padding: 6px 16px;
    border-radius: 0;
    border: 1px solid var(--border);
    font-size: 13px;
    transition: all 150ms ease;
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }
  .btn-outline:hover:not(:disabled) {
    color: var(--text-primary);
    background: var(--bg-hover);
  }

  .btn-danger {
    background: transparent;
    color: var(--error);
    font-weight: 500;
    padding: 8px 20px;
    border-radius: 0;
    border: 1px solid var(--error);
    font-size: 14px;
    transition: all 150ms ease;
  }
  .btn-danger:hover:not(:disabled) {
    background: rgba(239, 68, 68, 0.1);
  }

  /* --- Inputs (solid, square) --- */

  .input-field {
    width: 100%;
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: 0;
    padding: 10px 14px;
    font-family: "Inter", system-ui, sans-serif;
    font-size: 14px;
    color: var(--text-primary);
    transition: border-color 150ms ease;
  }
  .input-field::placeholder {
    color: var(--text-muted);
  }
  .input-field:focus {
    outline: none;
    border-color: var(--text-secondary);
    border-style: solid;
  }
  .input-field:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* --- Cards (solid, square, transparent) --- */

  .card {
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 0;
    padding: 20px;
  }

  .card-secondary {
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 0;
    padding: 20px;
  }

  /* --- Badges (square) --- */

  .badge-active {
    background: var(--badge-active-bg);
    color: var(--badge-active-text);
    font-size: 13px;
    font-weight: 500;
    padding: 2px 10px;
    border-radius: 0;
    display: inline-block;
  }

  .badge-inactive {
    background: var(--badge-inactive-bg);
    color: var(--badge-inactive-text);
    font-size: 13px;
    padding: 2px 10px;
    border-radius: 0;
    display: inline-block;
  }

  .badge-error {
    background: rgba(239, 68, 68, 0.15);
    color: #ef4444;
    font-size: 13px;
    font-weight: 500;
    padding: 2px 10px;
    border-radius: 0;
    display: inline-block;
  }

  /* --- Code blocks (left-border, no rounding) --- */

  .code-block {
    background: var(--bg-code);
    border-left: 3px solid var(--code-border-orange);
    border-radius: 0;
    padding: 12px 16px;
    font-size: 14px;
    color: var(--text-primary);
    overflow-x: auto;
  }

  .code-block-blue {
    border-left-color: var(--code-border-blue);
  }
  .code-block-green {
    border-left-color: var(--code-border-green);
  }
  .code-block-purple {
    border-left-color: var(--code-border-purple);
  }

  /* --- Status dots --- */

  .status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    display: inline-block;
    flex-shrink: 0;
  }

  /* --- Table --- */

  .table-header {
    color: var(--text-muted);
    font-size: 11px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 8px 16px;
    border-bottom: 1px solid var(--border);
    text-align: left;
  }

  .table-cell {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border);
    font-size: 14px;
  }

  .table-row:hover {
    background: transparent;
  }

  /* --- Section labels (uppercase muted) --- */

  .section-label {
    font-size: 11px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-muted);
  }

  /* --- Tabs (square, solid) --- */

  .tab {
    padding: 6px 14px;
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 0;
    transition: all 150ms ease;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }
  .tab:hover {
    color: var(--text-primary);
    background: var(--bg-hover);
  }

  .tab-active {
    padding: 6px 14px;
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid var(--border);
    border-bottom: 2px solid var(--text-primary);
    border-radius: 0;
    transition: all 150ms ease;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }

  /* --- Dropdown (square, solid) --- */

  .dropdown-menu {
    background: var(--bg-page);
    border: 1px solid var(--border);
    border-radius: 0;
    overflow: hidden;
  }

  .dropdown-item {
    width: 100%;
    text-align: left;
    padding: 8px 12px;
    font-size: 13px;
    color: var(--text-primary);
    background: transparent;
    border: none;
    border-bottom: 1px solid var(--border);
    cursor: pointer;
    transition: background 100ms ease;
  }
  .dropdown-item:hover {
    background: var(--bg-hover);
  }
  .dropdown-item:last-child {
    border-bottom: none;
  }

  /* --- Chat scrollbar (visible, styled) --- */

  .chat-scroll::-webkit-scrollbar {
    width: 8px;
  }
  .chat-scroll::-webkit-scrollbar-track {
    background: transparent;
  }
  .chat-scroll::-webkit-scrollbar-thumb {
    background: #333;
    border-radius: 4px;
  }
  .chat-scroll::-webkit-scrollbar-thumb:hover {
    background: #444;
  }
}

/* ============================================
   Animations
   ============================================ */

/* --- Skeleton loading shimmer --- */

.skeleton {
  background: linear-gradient(90deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.07) 50%, rgba(255,255,255,0.03) 100%);
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}
@keyframes skeleton-shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes typing-pulse {
  0%, 80%, 100% { opacity: 0.3; transform: scale(0.8); }
  40% { opacity: 1; transform: scale(1); }
}

.typing-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--text-muted);
  display: inline-block;
  animation: typing-pulse 1.4s infinite;
}

/* --- Agent status animations --- */

@keyframes agent-pulse-kf {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(1.3); }
}

@keyframes agent-spinner-kf {
  to { transform: rotate(360deg); }
}

@keyframes agent-check-in-kf {
  0% { opacity: 0; transform: scale(0.5); }
  60% { opacity: 1; transform: scale(1.1); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes agent-typing-kf {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 1; }
}

@keyframes message-enter-kf {
  0% { opacity: 0; transform: translateY(8px); }
  100% { opacity: 1; transform: translateY(0); }
}

.agent-pulse {
  animation: agent-pulse-kf 2s ease-in-out infinite;
}

.agent-spinner {
  width: 16px;
  height: 16px;
  border: 2px solid var(--border);
  border-top-color: var(--text-primary);
  border-radius: 50%;
  animation: agent-spinner-kf 0.8s linear infinite;
}

.agent-check-in {
  animation: agent-check-in-kf 0.4s ease-out forwards;
}

.agent-typing {
  animation: agent-typing-kf 1.5s ease-in-out infinite;
}

.message-enter {
  animation: message-enter-kf 0.3s ease-out forwards;
}

/* --- Shimmer effect on active text --- */

.agent-shimmer {
  background: linear-gradient(
    90deg,
    var(--text-primary) 0%,
    rgba(255,255,255,0.4) 50%,
    var(--text-primary) 100%
  );
  background-size: 200% 100%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: agent-shimmer-kf 2s ease-in-out infinite;
}
@keyframes agent-shimmer-kf {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* --- Small spinner for steps --- */

.agent-spinner-small {
  width: 14px;
  height: 14px;
  border: 2px solid rgba(255,255,255,0.1);
  border-top-color: var(--text-primary);
  border-radius: 50%;
  animation: agent-spinner-kf 0.7s linear infinite;
  display: inline-block;
}

/* --- Phase icon pulse for AgentStatus tab --- */

.agent-spinner-small-icon {
  animation: agent-phase-pulse 1.5s ease-in-out infinite;
}

@keyframes agent-phase-pulse {
  0%, 100% { opacity: 0.5; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.15); }
}

/* --- Step fade-in with delay --- */

@keyframes agent-step-enter {
  from { opacity: 0; transform: translateX(-8px); }
  to { opacity: 1; transform: translateX(0); }
}

/* --- TheFold brand shimmer (simple opacity+brightness) --- */

.text-shimmer {
  animation: text-shimmer 3s ease-in-out infinite;
}

.text-shimmer-slow {
  animation: text-shimmer 5s ease-in-out infinite;
}

@keyframes text-shimmer {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; filter: brightness(1.3); }
}

/* --- Animated dots --- */

.agent-dots .dot {
  animation: agent-dot-bounce 1.4s ease-in-out infinite;
  display: inline-block;
  color: var(--text-muted);
}
.agent-dots .dot:nth-child(1) { animation-delay: 0s; }
.agent-dots .dot:nth-child(2) { animation-delay: 0.2s; }
.agent-dots .dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes agent-dot-bounce {
  0%, 80%, 100% { opacity: 0.3; }
  40% { opacity: 1; }
}

/* --- Grid blink for "Forbereder" phase --- */

.agent-grid-blink-1 { animation: agent-grid-blink 1.6s ease-in-out infinite 0s; }
.agent-grid-blink-2 { animation: agent-grid-blink 1.6s ease-in-out infinite 0.2s; }
.agent-grid-blink-3 { animation: agent-grid-blink 1.6s ease-in-out infinite 0.4s; }
.agent-grid-blink-4 { animation: agent-grid-blink 1.6s ease-in-out infinite 0.6s; }
@keyframes agent-grid-blink {
  0%, 100% { opacity: 0.2; }
  25% { opacity: 1; }
  50% { opacity: 0.2; }
}

/* --- Build swing for "Bygger" phase --- */

.agent-build-swing {
  animation: agent-swing 0.8s ease-in-out infinite alternate;
  transform-origin: bottom right;
}
@keyframes agent-swing {
  from { transform: rotate(-10deg); }
  to { transform: rotate(10deg); }
}

/* --- Slow spin for "Utfører" phase (gear icon) --- */

.agent-spin-slow {
  animation: agent-spin 3s linear infinite;
}
@keyframes agent-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
